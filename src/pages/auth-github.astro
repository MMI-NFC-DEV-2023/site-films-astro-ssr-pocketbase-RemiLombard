---
import Layout from "../layouts/Layout.astro";
---

<Layout pageTitle="Auth avec Github">
  <button id="connectGithub">Se connecter</button>
</Layout>

<script>
  import { pb } from "../backend";

  document
    .getElementById("connectGithub")
    ?.addEventListener("click", async () => {
      const authData = await pb
        .collection("users")
        .authWithOAuth2({ provider: "github" });
      document.cookie = pb.authStore.exportToCookie({httpOnly: false});
    });
</script>
